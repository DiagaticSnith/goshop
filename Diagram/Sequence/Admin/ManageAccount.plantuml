@startuml
title Sequence Diagram - Quản lý Tài khoản

actor Admin
participant "UI / Web App" as UI
participant "Auth Service" as Auth
participant "Account Service" as AccSvc
database DB

== Đăng nhập ==
Admin -> UI : Nhập thông tin đăng nhập
UI -> Auth : authenticate(credentials)
Auth -> DB : verifyAdmin()
DB --> Auth : adminInfo
Auth --> UI : loginSuccess

== Mở chức năng Quản lý tài khoản ==
Admin -> UI : Open Account Management
UI --> Admin : Hiển thị giao diện quản lý tài khoản

== Thực hiện thao tác quản lý ==
alt Thêm tài khoản
    Admin -> UI : Nhập thông tin tài khoản mới
    UI -> AccSvc : validateAccountData(data)
    AccSvc --> UI : validationResult

    alt Dữ liệu không hợp lệ
        UI --> Admin : Thông báo thông tin không hợp lệ
    else Dữ liệu hợp lệ
        Admin -> UI : Xác nhận lưu
        UI -> AccSvc : createAccount(data)
        AccSvc -> DB : insert account
        DB --> AccSvc : success
        AccSvc --> UI : confirmation
        UI --> Admin : Thêm tài khoản thành công
    end

else Cập nhật tài khoản
    Admin -> UI : Chỉnh sửa thông tin tài khoản
    UI -> AccSvc : validateAccountData(data)
    AccSvc --> UI : validationResult

    alt Dữ liệu không hợp lệ
        UI --> Admin : Thông báo thông tin không hợp lệ
    else Dữ liệu hợp lệ
        Admin -> UI : Xác nhận lưu
        UI -> AccSvc : updateAccount(accountId, data)
        AccSvc -> DB : update account
        DB --> AccSvc : success
        AccSvc --> UI : confirmation
        UI --> Admin : Cập nhật tài khoản thành công
    end
end

@enduml